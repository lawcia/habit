(this.webpackJsonphabit=this.webpackJsonphabit||[]).push([[0],{174:function(e,t,a){e.exports=a(326)},179:function(e,t,a){},196:function(e,t,a){},323:function(e,t,a){},326:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),r=a(157),l=a.n(r),s=(a(179),a(11)),c=a(12),u=a(15),o=a(13),h=a(14),m=a(36),d=a(23),b=a(7),p=a.n(b),g=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(o.a)(t).call(this,e))).state={username:"",password:""},a.handleChange=a.handleChange.bind(Object(d.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(m.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){p.a.post("/api/v1/users/register",this.state).then((function(){alert("You can now login")})).catch((function(e){alert(e.response.data.message)})),e.preventDefault()}},{key:"render",value:function(){return i.a.createElement("form",{onSubmit:this.handleSubmit,className:"landingForm"},i.a.createElement("label",null,"Username:",i.a.createElement("input",{type:"text",name:"username",value:this.state.value,onChange:this.handleChange,minLength:3,maxLength:20,required:!0})),i.a.createElement("br",null),i.a.createElement("label",null,"Password:",i.a.createElement("input",{type:"password",name:"password",value:this.state.value,onChange:this.handleChange,minLength:6,maxLength:15,required:!0})),i.a.createElement("br",null),i.a.createElement("input",{className:"submitBtn",type:"submit",value:"Register"}))}}]),t}(i.a.Component),f=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(o.a)(t).call(this,e))).state={username:"",password:""},a.handleChange=a.handleChange.bind(Object(d.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(m.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;p.a.post("/api/v1/users/login",this.state).then((function(){return t.props.getUserData()})).catch((function(e){return e.response.data.message?alert(e.response.data.message):alert("something went wrong")})),e.preventDefault()}},{key:"render",value:function(){return i.a.createElement("form",{onSubmit:this.handleSubmit,className:"landingForm"},i.a.createElement("label",null,"Username:",i.a.createElement("input",{type:"text",name:"username",value:this.state.value,onChange:this.handleChange,required:!0})),i.a.createElement("br",null),i.a.createElement("label",null,"Password:",i.a.createElement("input",{type:"password",name:"password",value:this.state.value,onChange:this.handleChange,required:!0})),i.a.createElement("br",null),i.a.createElement("input",{className:"submitBtn",type:"submit",value:"Login"}))}}]),t}(i.a.Component),v=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(i)))).state={new:!1,existing:!1},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"clicker",value:function(e){this.setState(Object(m.a)({},e.target.id,!0))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"LandingPage"},i.a.createElement("h1",{className:"siteHeading"},"Habit."),i.a.createElement("div",{className:"rightCol"},!this.state.new&&i.a.createElement("button",{id:"new",onClick:function(t){return e.clicker(t)}},"New User?"),this.state.new&&i.a.createElement("div",{className:"new"},i.a.createElement("h3",null,"Register"),i.a.createElement(g,null)),!this.state.existing&&i.a.createElement("button",{id:"existing",onClick:function(t){return e.clicker(t)}},"Existing User?"),this.state.existing&&i.a.createElement("div",{className:"existing"},i.a.createElement("h3",null,"Login"),i.a.createElement(f,{getUserData:this.props.getUserData}))))}}]),t}(n.Component),E=(a(196),a(158)),y=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(i)))).state={clicked:!1,clickable:!1,startDate:new Date,min_diff:0},a.delete=function(){p.a.delete("/api/v1/habits/".concat(a.props.habit._id)).then((function(){return a.props.getAllHabits()}))},a.calcMinDiff=function(){var e=new Date(a.props.habit.dateChecked[a.props.habit.dateChecked.length-1]),t=new Date,n=Math.floor(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())-Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()))/6e4;a.setState({min_diff:n})},a.date_diff_indays=function(){"Daily"===a.props.habit.frequency&&a.state.min_diff>1440&&a.setState({clicked:!1,clickable:!0}),"Weekly"===a.props.habit.frequency&&a.state.min_diff>10080&&a.setState({clicked:!1,clickable:!0}),"Monthly"===a.props.habit.frequency&&a.state.min_diff>43800&&a.setState({clicked:!1,clickable:!0})},a.strikethrough=function(){a.setState({clicked:!0,clickable:!1},(function(){p.a.put("/api/v1/habits/".concat(a.props.habit._id),{streak:a.props.habit.streak}).then((function(){a.props.getAllHabits()})).catch((function(){return a.setState({clicked:!1,clickable:!0})}))}))},a.checkStreak=function(){"Daily"===a.props.habit.frequency&&a.state.min_diff>2880&&p.a.put("/api/v1/habits/streak/".concat(a.props.habit._id)),"Weekly"===a.props.habit.frequency&&a.state.min_diff>20160&&p.a.put("/api/v1/streak/".concat(a.props.habit._id)),"Monthly"===a.props.habit.frequency&&a.state.min_diff>87600&&p.a.put("/api/v1/streak/".concat(a.props.habit._id))},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;setInterval((function(){return e.calcMinDiff()}),1e3),setInterval((function(){return e.checkStreak()}),1e3),0!==this.props.habit.dateChecked.length?this.interval=setInterval((function(){return e.date_diff_indays()}),1e3):this.setState({clicked:!1,clickable:!0})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"Habit"},i.a.createElement("h3",{className:"".concat(!this.state.clickable," habitName")}," ",this.props.habit.title," "),i.a.createElement("hr",null),!this.state.clickable&&i.a.createElement("p",{style:{textAlign:"center"}},"habit was done. come back ",this.props.habit.frequency," to mark complete again!"),i.a.createElement("button",{className:"checked".concat(this.state.clickable),onClick:function(){return e.strikethrough()},id:"props.habit._id"},i.a.createElement("i",{class:"fas fa-check-circle"})," mark complete?"),i.a.createElement("div",{className:"habitDetails"},i.a.createElement("h4",null,this.props.habit.frequency," habit "),i.a.createElement("p",null," ",i.a.createElement("i",{class:"fas fa-star"})," Current Streak ",this.props.habit.streak)),i.a.createElement("p",{className:"legend"},"Days habit was done"),i.a.createElement("div",{style:{height:"200px",width:"100%",maxWidth:"600px"}},i.a.createElement(E.a,{data:this.props.habit.dateChecked.map((function(e){return{day:new Date(e).toLocaleDateString("sv-SE"),value:100}})),from:this.props.habit.createdAt,to:this.state.startDate,emptyColor:"#eeeeee",colors:["#C84630","#5DA271"],margin:{top:40,right:40,bottom:40,left:40},yearSpacing:40,monthBorderColor:"#ffffff",dayBorderWidth:2,dayBorderColor:"#ffffff",legends:[{anchor:"bottom-right",direction:"row",translateY:36,itemCount:1,itemWidth:42,itemHeight:36,itemsSpacing:14,itemDirection:"right-to-left"}]})),i.a.createElement("button",{className:"deleteBtn",name:"delete",id:"props.habit._id",onClick:this.delete}," Delete habit "))}}]),t}(n.Component),k=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(i)))).state={habits:[]},a.getAllHabits=function(){p.a.get("/api/v1/habits/".concat(a.props.userId)).then((function(e){a.setState({habits:e.data})}))},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getAllHabits()}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,this.state.habits.map((function(t,a){return i.a.createElement(y,{state:e.state.updated,habit:t,getAllHabits:e.getAllHabits,key:a})})))}}]),t}(n.Component);function O(e){return i.a.createElement("div",{className:"dashBoard"},i.a.createElement("h1",{className:"dashHeading"},e.username,"`s Habits"),i.a.createElement(k,{userId:e.userId}))}var j=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(o.a)(t).call(this,e))).state={title:"",frequency:"Daily",userId:a.props.bigState.userId},a.handleChange=a.handleChange.bind(Object(d.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(m.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;p.a.post("/api/v1/habits",this.state).then((function(e){e.data.success&&(alert(e.data.message),t.props.redirect())})).catch((function(e){console.log(e)})),e.preventDefault()}},{key:"render",value:function(){return i.a.createElement("form",{className:"habitForm",onSubmit:this.handleSubmit},i.a.createElement("label",{htmlFor:"title"},"My new habit will be called:",i.a.createElement("input",{type:"text",name:"title",value:this.state.value,onChange:this.handleChange,minLength:3,maxLength:25,required:!0})),i.a.createElement("br",null),i.a.createElement("label",{htmlFor:"frequency"},"I want to complete this habit:",i.a.createElement("select",{name:"frequency",id:"frequency",onChange:this.handleChange,defaultValue:"Daily"},i.a.createElement("option",{value:"Daily"},"Daily"),i.a.createElement("option",{value:"Weekly"},"Weekly"),i.a.createElement("option",{value:"Monthly"},"Monthly"))),i.a.createElement("br",null),i.a.createElement("input",{className:"submitBtn",type:"submit",value:"Add Habit"}))}}]),t}(i.a.Component);function C(e){return i.a.createElement("div",{className:"addHabit"},i.a.createElement("div",{className:"habitDiv"},i.a.createElement("h1",{style:{textAlign:"center"}},"Add Habit"),i.a.createElement(j,{bigState:e.bigState,redirect:function(){var t=e.history;t&&t.push("/dash")}})))}a(323);var S=a(60),D=a(38),w=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(i)))).state={loggedIn:!1,userId:"",username:""},a.loggedInUser=function(e,t){a.setState({loggedIn:!0,userId:e,username:t})},a.loggedOutUser=function(){a.setState({loggedIn:!1,userId:"",username:""})},a.logoutUser=function(){p.a.post("/api/v1/users/logout").then((function(){return a.loggedOutUser()}))},a.getUserData=function(){p.a.get("/api/v1/users").then((function(e){return e.data.userLoggedIn&&a.loggedInUser(e.data._id,e.data.username)})).catch((function(e){return console.error(e)}))},a.componentDidMount=function(){a.getUserData()},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(S.a,null,i.a.createElement("div",{className:"App"},i.a.createElement("nav",null,i.a.createElement("ul",null,this.state.loggedIn&&i.a.createElement("div",{className:"nav"},i.a.createElement("li",null,i.a.createElement(S.b,{to:"/dash"},"Dashboard")),i.a.createElement("li",null,i.a.createElement(S.b,{to:"/addHabit"},"Add Habit")),i.a.createElement("li",null,i.a.createElement(S.b,{onClick:function(){return e.logoutUser()},to:"/"},"Logout"))))),i.a.createElement(D.d,null,this.state.loggedIn&&i.a.createElement(D.b,{path:"/dash",render:function(t){return i.a.createElement(O,Object.assign({},t,{userId:e.state.userId,username:e.state.username}))}}),this.state.loggedIn&&i.a.createElement(D.b,{path:"/addHabit",render:function(t){return i.a.createElement(C,Object.assign({},t,{bigState:e.state}))}}),i.a.createElement(D.b,{path:"/"},this.state.loggedIn?i.a.createElement(D.a,{to:"/dash"}):i.a.createElement(v,{getUserData:this.getUserData})))))}}]),t}(n.Component);l.a.render(i.a.createElement(w,null),document.getElementById("root"))}},[[174,1,2]]]);
//# sourceMappingURL=main.77029430.chunk.js.map